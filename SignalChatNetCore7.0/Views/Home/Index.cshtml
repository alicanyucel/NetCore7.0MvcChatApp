@{
    ViewData["Title"] = "Home Page";
}

<div class="text-center">
    <h1 class="display-4">Welcome</h1>
    <button type="button" id="btnSendMessage">Mesaj Gönder</button>
</div>
@section Scripts{
<script>
    const connection=new signalR.HubConnectionBuilder().withUrl("/chatHub").configureLogging(signalR.LogLevel.Information).build();
    async function start(){
        try{
        await connection.start();
        console.log("signalr connected");
        // test edildi socket çalışıyor
        }
        catch(err){
            console.error(err);
            setTimeout(start,5000);
        }

    }
    connection.onclose(async()=>{
        await start();
    });
    start();
    $('#btnSendMessage').click(function() {
        try{
            connection.invoke("SendMessage","Ali Can","merhaba");
        }
        catch(err){
            console.error(err);
        }
    });
</script>
}